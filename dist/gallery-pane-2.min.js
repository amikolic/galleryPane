!function(a,b){"function"==typeof define&&define.amd?define(["jquery","swipejs"],b):"object"==typeof module&&module.exports?module.exports=b(require("jquery","swipejs")):a.GalleryPane=b(jQuery,window.Swipe)}(this,function(a,b){function c(a){return"."+a.replace(/\s/g,".")}function d(b,c){var d="";return a.each(b,function(a,b){d+=c(b,a)}),d}function e(){this.initialize.apply(this,arguments)}var f=0,g=a(window),h=a(window.document);return a.extend(e.prototype,{initialize:function(b){this.options=a.extend({},e.defaults,b),this.position=this.options.position,this.ens=".GalleryPane"+ ++f,this.render(),this.loadImage(this.position,!0),this.setupEvents()},render:function(){this.$el=a(this.templates.main(this.options)),this.options.items.length&&a(this.templates.arrows(this.options)).appendTo(this.$el),this.$swipeEl=this.$el.find(c(this.options.itemsWrapClassName)),this.$itemImages=this.$el.find(c(this.options.itemImageClassName)),this.$pagination=this.$el.find(c(this.options.pagesClassName)),this.$el.appendTo(this.options.appendTarget),this.setImageDimensions(),this.swipe=new b(this.$swipeEl.get(0),{startSlide:this.position,speed:this.options.slideSpeed,continuous:!1}),this.options.afterRender&&this.options.afterRender(this)},setEvent:function(b,d,e,f){var g=this.ens,h=d.replace(/\w\b/g,function(a){return a+g});return b.on(h,e&&c(this.options[e]),a.proxy(f,this)),this},setupEvents:function(){this.setEvent(this.$el,"click","thumbClassName",function(b){this.setPosition(this.$thumbs.index(a(b.currentTarget)))}),this.setEvent(this.$el,"click","toggleThumbsBtnClassName",this.toggleThumbnails),this.setEvent(this.$el,"click","arrowNextClassName",this.next),this.setEvent(this.$el,"click","arrowPrevClassName",this.prev),this.setEvent(this.$el,"click","closeBtnClassName",this.close),this.setEvent(g,"resize",null,this.setImageDimensions),this.setEvent(h,"keyup",null,function(a){this.options.closeOnEscapeKey&&27===a.keyCode&&this.close(),this.options.navigateWithKeys&&this.options.items.length>1&&((39===a.keyCode||68===a.keyCode)&&this.next(),(37===a.keyCode||65===a.keyCode)&&this.prev())})},normalizePosition:function(a){return a>=this.options.items.length?0:0>a?this.options.items.length-1:a},setImageDimensions:function(){this.$itemImages.css("max-height",this.$swipeEl.height()+"px")},loadImage:function(a,b){var c=this,d=new Image,e=this.normalizePosition(a),f=this.options.items[e].largeImage;return this.$itemImages.eq(e).attr("src",f),b&&(d.onload=function(){c.loadImage(a+1).loadImage(a-1)}),d.src=f,this},setPosition:function(a){var b=this.normalizePosition(a);b!==this.position&&(this.position=b,this.swipe.slide(b),this.loadImage(b,!0),this.$pagination.text(b+1+"/"+this.options.items.length),this.options.afterPositionChange&&this.options.afterPositionChange(this))},next:function(){this.setPosition(this.position+1)},prev:function(){this.setPosition(this.position-1)},toggleThumbnails:function(){this.$el.hasClass(this.options.thumbsActiveClassName)?this.hideThumbNails():this.showThumbnails()},showThumbnails:function(){this.$thumbs||(a(this.templates.thumbs(this.options)).appendTo(this.$el),this.$thumbs=this.$el.find(c(this.options.thumbClassName))),this.$el.addClass(this.options.thumbsActiveClassName)},hideThumbNails:function(){this.$el.removeClass(this.options.thumbsActiveClassName)},close:function(){g.off(this.ens),h.off(this.ens),this.swipe.kill(),this.$el.remove()},templates:{main:function(a){return'<div class="'+a.elementClassName+'"><div class="'+a.headerClassName+'"><div class="'+a.brandingClassName+'">'+a.brandingText+'</div><p class="'+a.pagesClassName+'">'+(a.position+1)+"/"+a.items.length+'</p><button type="button" title="'+a.toggleThumbsBtnText+'" class="'+a.toggleThumbsBtnClassName+'">'+a.toggleThumbsBtnText+'</button><button type="button" title="'+a.closeBtnText+'" class="'+a.closeBtnClassName+'">'+a.closeBtnText+'</button></div><div class="'+a.itemsWrapClassName+'"><ul>'+d(a.items,function(b){return'<li><div class="'+a.itemClassName+'"><img class="'+a.itemImageClassName+'" data-src="'+b.largeImage+'" alt="'+b.title+'" /></div></li>'})+"</ul></div></div>"},thumbs:function(a){return'<div class="'+a.thumbsWrapClassName+'"><ul>'+d(a.items,function(b){return'<li><div class="'+a.thumbClassName+'"><img src="'+b.smallImage+'" alt="'+b.title+'" /></div></li>'})+"</ul></div>"},arrows:function(a){return'<div class="'+a.arrowsClassName+'"><button type="button" class="'+a.arrowNextClassName+'"></button><button type="button" class="'+a.arrowPrevClassName+'"></button></div>'}}}),e.defaults={elementClassName:"gpElement",headerClassName:"gpHeader",closeBtnClassName:"gpCloseBtn",pagesClassName:"gpPages",brandingClassName:"gpBrand",itemsWrapClassName:"gpItems",itemClassName:"gpItem",itemImageClassName:"gpItemImage",toggleThumbsBtnClassName:"gpToggleThumbsBtn",thumbsWrapClassName:"gpThumbs",thumbClassName:"gpThumb",arrowsClassName:"gpArrows",arrowNextClassName:"gpArrow gpArrowNext",arrowPrevClassName:"gpArrow gpArrowPrev",brandingText:"Gallery pane",toggleThumbsBtnText:"Toggle thumbs",closeBtnText:"Close gallery",appendTarget:"body",items:[],position:0,continuous:!0,slideSpeed:300,navigateWithKeys:!0,closeOnEscapeKey:!0,afterRender:null},e});